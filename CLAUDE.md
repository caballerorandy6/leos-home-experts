# Leo's Home Experts - Development Guidelines

## Project Overview

- **Business:** Leo's Home Experts - Home services company
- **Competitor:** shadedocs.com
- **TikTok:** tiktok.com/@leoshomeexpert
- **Type:** Landing page optimized for conversions and local SEO

---

## Critical Rules

These rules are **MANDATORY** and must be followed without exception.

### 1. No AI Attribution

**NEVER include any mention of AI, Claude, ChatGPT, or any AI assistant in:**
- Git commits
- Code comments
- Documentation
- Pull request descriptions
- Any project files

**Forbidden patterns:**
```
Co-Authored-By: Claude...
Co-Authored-By: ChatGPT...
Generated by AI...
Created with Claude...
AI-assisted...
```

### 2. English Only

All code, comments, documentation, commit messages, and content must be written in **English only**.

---

## Technology Stack

| Technology | Version | Purpose |
|------------|---------|---------|
| Next.js | 16+ | Framework (App Router) |
| React | 19+ | UI Library |
| TypeScript | 5+ | Type safety |
| TailwindCSS | 4+ | Styling |
| shadcn/ui | latest | UI Components |
| React Hook Form | 7+ | Form handling |
| Zod | 4+ | Schema validation |
| Lucide React | latest | Icons |

---

## React & Next.js Best Practices (Vercel Engineering)

### Priority 1: Eliminating Waterfalls (CRITICAL)

#### Defer Await Until Needed
Move `await` into branches where actually used:

```typescript
// WRONG
async function getData(shouldFetch: boolean) {
  const data = await fetchData();
  if (!shouldFetch) return null;
  return data;
}

// CORRECT
async function getData(shouldFetch: boolean) {
  if (!shouldFetch) return null;
  return await fetchData();
}
```

#### Parallel Data Fetching
Use `Promise.all()` for independent operations:

```typescript
// WRONG - Waterfall
const services = await getServices();
const testimonials = await getTestimonials();

// CORRECT - Parallel
const [services, testimonials] = await Promise.all([
  getServices(),
  getTestimonials()
]);
```

#### Strategic Suspense Boundaries
Use Suspense to stream content and avoid blocking:

```tsx
<Suspense fallback={<ServicesSkeleton />}>
  <ServicesSection />
</Suspense>
```

### Priority 2: Bundle Size Optimization (CRITICAL)

#### Avoid Barrel File Imports
Import directly, never from barrel files:

```typescript
// WRONG
import { Button, Card, Input } from '@/components/ui';

// CORRECT
import { Button } from '@/components/ui/button';
import { Card } from '@/components/ui/card';
import { Input } from '@/components/ui/input';
```

#### Dynamic Imports for Heavy Components
Use `next/dynamic` for non-critical components:

```typescript
import dynamic from 'next/dynamic';

const HeavyComponent = dynamic(() => import('./heavy-component'), {
  loading: () => <Skeleton />,
  ssr: false
});
```

#### Defer Third-Party Libraries
Load analytics and non-critical scripts after hydration:

```typescript
useEffect(() => {
  import('analytics-lib').then((module) => {
    module.init();
  });
}, []);
```

### Priority 3: Server-Side Performance (HIGH)

#### Use Server Components by Default
Only add `'use client'` when strictly necessary:
- `useState`, `useEffect`, `useReducer`
- Event handlers (`onClick`, `onChange`, `onSubmit`)
- Browser APIs (`localStorage`, `window`, `document`)
- Libraries requiring client (react-hook-form)

#### Cache with React.cache()
For per-request deduplication:

```typescript
import { cache } from 'react';

export const getService = cache(async (slug: string) => {
  return await db.service.findUnique({ where: { slug } });
});
```

#### Minimize Client Component Props
Serialize only necessary data:

```typescript
// WRONG - Passing entire object
<ClientComponent data={fullServiceObject} />

// CORRECT - Pass only needed fields
<ClientComponent
  name={service.name}
  price={service.price}
/>
```

### Priority 4: Re-render Optimization (MEDIUM)

#### Derive State During Render
Don't use effects for derived state:

```typescript
// WRONG
const [filteredItems, setFilteredItems] = useState([]);
useEffect(() => {
  setFilteredItems(items.filter(i => i.active));
}, [items]);

// CORRECT
const filteredItems = useMemo(
  () => items.filter(i => i.active),
  [items]
);
```

#### Functional setState
Use functional form for stable callbacks:

```typescript
// WRONG
const increment = () => setCount(count + 1);

// CORRECT
const increment = () => setCount(c => c + 1);
```

#### Lazy State Initialization
Pass function for expensive initial values:

```typescript
// WRONG
const [data] = useState(expensiveComputation());

// CORRECT
const [data] = useState(() => expensiveComputation());
```

---

## Accessibility Rules (CRITICAL)

### Accessible Names
- Every interactive control must have an accessible name
- Icon-only buttons must have `aria-label` or `aria-labelledby`
- Every input must be properly labeled
- Links must have meaningful text (no "click here")
- Decorative icons must be `aria-hidden`

### Keyboard Access
- Do not use `div` or `span` as buttons without full keyboard support
- All interactive elements must be reachable by Tab
- Focus must be visible for keyboard users
- Do not use `tabindex` greater than 0
- Escape must close dialogs/overlays

### Focus and Dialogs
- Modals must trap focus while open
- Restore focus to trigger on close
- Set initial focus inside dialogs

### Forms and Errors
- Errors must be linked to fields using `aria-describedby`
- Required fields must be announced
- Invalid fields must set `aria-invalid`
- Helper text must be associated with inputs

---

## Animation Performance Rules (CRITICAL)

### Never Patterns
- Do not interleave layout reads and writes in the same frame
- Do not animate layout continuously on large surfaces
- Do not drive animation from `scrollTop`, `scrollY`, or scroll events
- No `requestAnimationFrame` loops without a stop condition

### Choose the Right Mechanism
- Default to `transform` and `opacity` for motion
- Use JS-driven animation only when interaction requires it
- Paint/layout animation only on small, isolated surfaces

### Scroll Optimization
- Prefer Scroll or View Timelines when available
- Use `IntersectionObserver` for visibility and pausing
- Do not poll scroll position for animation
- Pause/stop animations when off-screen

### Blur and Filters
- Keep blur animation small (<=8px)
- Use blur only for short, one-time effects
- Never animate blur continuously or on large surfaces

---

## SEO Audit Guidelines

### Technical SEO Checklist

#### Crawlability
- Robots.txt configured correctly
- XML sitemap exists and submitted
- Important pages within 3 clicks of homepage
- Logical hierarchy and internal linking
- No orphan pages

#### Indexation
- All pages have canonical tags
- Self-referencing canonicals on unique pages
- HTTP to HTTPS redirects
- No redirect chains/loops

#### Core Web Vitals
- LCP (Largest Contentful Paint): < 2.5s
- INP (Interaction to Next Paint): < 200ms
- CLS (Cumulative Layout Shift): < 0.1

### On-Page SEO

#### Title Tags
- Unique titles for each page
- Primary keyword near beginning
- 50-60 characters (visible in SERP)
- Brand name at end

#### Meta Descriptions
- Unique per page
- 150-160 characters
- Clear value proposition
- Call to action

#### Heading Structure
- One H1 per page with primary keyword
- Logical hierarchy (H1 > H2 > H3)
- Headings describe content

#### Image Optimization
- Descriptive file names
- Alt text on all images (descriptive, not "image" or "photo")
- Compressed file sizes
- Modern formats (WebP)
- Lazy loading
- Responsive images

---

## Schema Markup Guidelines

### Use JSON-LD Format
Place in `<head>` or end of `<body>`:

```json
{
  "@context": "https://schema.org",
  "@type": "LocalBusiness",
  "name": "Leo's Home Experts",
  "url": "https://www.ac-remodelingservice.com",
  "telephone": "+1-XXX-XXX-XXXX",
  "address": {
    "@type": "PostalAddress",
    "streetAddress": "...",
    "addressLocality": "...",
    "addressRegion": "TX",
    "postalCode": "...",
    "addressCountry": "US"
  }
}
```

### Required Schema Types for This Project
- `LocalBusiness` - Homepage/about
- `Service` - Service pages
- `FAQPage` - FAQ section
- `BreadcrumbList` - All pages with breadcrumbs
- `Organization` - Company info

### Validation
Always validate with:
- Google Rich Results Test
- Schema.org Validator

---

## Metadata Rules

### Correctness (CRITICAL)
- Define metadata in one place per page
- No duplicate title, description, canonical, or robots tags
- Metadata must be deterministic
- Escape and sanitize dynamic strings
- Every page must have safe defaults

### Social Cards (HIGH)
- Set Open Graph title, description, and image
- Use absolute URLs for images
- `og:url` must match canonical URL
- Set `twitter:card` to `summary_large_image`

### Icons and Manifest
- Include favicon
- Include apple-touch-icon
- Set theme-color intentionally

---

## Writing Guidelines (Avoid AI Patterns)

### Never Use
- Em dashes (use commas, colons, or parentheses instead)
- "Delve," "leverage," "utilize," "foster," "bolster"
- "Robust," "comprehensive," "pivotal," "cutting-edge"
- "Furthermore," "moreover," "that being said"
- "In today's fast-paced world..."
- "In the ever-evolving landscape..."
- "It's important to note that..."

### Filler Words to Avoid
- absolutely, actually, basically, certainly
- clearly, definitely, essentially, extremely
- fundamentally, incredibly, obviously, quite
- really, significantly, simply, surely, truly

### Writing Style
- Use direct, simple language
- Vary sentence length
- Write conversationally
- Be specific, not generic

---

## File Structure

```
src/
├── app/
│   ├── (marketing)/        # Public routes
│   │   ├── page.tsx        # Homepage
│   │   ├── services/
│   │   ├── about/
│   │   ├── contact/
│   │   └── layout.tsx
│   ├── api/
│   │   └── contact/
│   │       └── route.ts
│   ├── globals.css
│   └── layout.tsx
├── components/
│   ├── ui/                 # shadcn components
│   ├── sections/           # Page sections
│   ├── layout/             # Header, Footer, Nav
│   └── shared/             # Reusable components
├── lib/
│   ├── utils.ts
│   ├── validations.ts      # Zod schemas
│   └── constants.ts
├── hooks/
├── types/
└── styles/
```

---

## Naming Conventions

### Files and Folders
- Components: `kebab-case.tsx` (e.g., `service-card.tsx`)
- Pages: `page.tsx` in route folder
- Layouts: `layout.tsx`

### Variables and Functions
- Variables: `camelCase`
- Constants: `SCREAMING_SNAKE_CASE`
- Components: `PascalCase`
- Hooks: `useCamelCase`

---

## Import Order

```typescript
// 1. React/Next imports
import { useState, useEffect } from 'react';
import Image from 'next/image';
import Link from 'next/link';

// 2. Third-party libraries
import { z } from 'zod';
import { useForm } from 'react-hook-form';

// 3. UI Components
import { Button } from '@/components/ui/button';

// 4. Local components
import { ServiceCard } from '@/components/services/service-card';

// 5. Utilities
import { cn } from '@/lib/utils';

// 6. Types
import type { Service } from '@/types';

// 7. Constants
import { SERVICES } from '@/lib/constants';
```

---

## Git Commit Format

```
<type>(<scope>): <description>
```

### Types
- `feat`: New feature
- `fix`: Bug fix
- `docs`: Documentation
- `style`: Formatting (no logic change)
- `refactor`: Code refactoring
- `perf`: Performance improvement
- `test`: Tests
- `chore`: Maintenance

### Examples
```
feat(contact): add contact form with zod validation
fix(nav): mobile menu not closing on link click
perf(images): optimize hero section images
```

---

## Mandatory Checklist Before Deploy

- [ ] All tests pass
- [ ] No `console.log` in production
- [ ] All images have descriptive alt text
- [ ] Metadata configured for all pages
- [ ] Schema markup validated
- [ ] Build succeeds locally
- [ ] Lighthouse score > 90 on all metrics
- [ ] Mobile responsiveness verified
- [ ] Forms have proper validation and error states
- [ ] Accessibility audit passed

---

## Available Skills

Use these skills for specific tasks:

| Skill | Command | Use Case |
|-------|---------|----------|
| SEO Audit | `/seo-audit` | Audit SEO issues |
| Accessibility | `/fixing-accessibility` | Fix a11y issues |
| Motion Performance | `/fixing-motion-performance` | Fix animation issues |
| Metadata | `/fixing-metadata` | Fix page metadata |
| Schema Markup | `/schema-markup` | Add structured data |
| Web Design Guidelines | `/web-design-guidelines` | Review UI compliance |
| React Best Practices | `/vercel-react-best-practices` | Optimize React/Next.js |

---

## Enforcement

These guidelines are **strictly enforced**. All code must comply with these rules before being merged. No exceptions.
